# Индивидуальное домашние задание №3 по "Операционным системам" на тему "«Сетевые взаимодействия с применением транспортного протокола TCP" (на оценку 8)
Печик Ирина Юрьевна, БПИ-217, Вариант-7
### Условие задачи: задача о курильщиках
Есть три процесса–курильщика и один
процесс–посредник. Курильщик непрерывно скручивает сигареты
и курит их. Чтобы скрутить сигарету, нужны табак, бумага и спички. У одного процесса–курильщика есть табак, у второго — бумага, а у третьего — спички. Посредник кладет на стол по два разных случайных компонента. Тот процесс–курильщик, у которого
есть третий компонент, забирает компоненты со стола, скручивает
сигарету и курит. Посредник дожидается, пока курильщик закончит, затем процесс повторяется. Создать приложение, моделирующее поведение курильщиков и посредника. Каждый
курильщик — клиент. Посредник — сервер.
# Решение на 4-5 баллов:
### 1. Сценарий:
  * Для сервера (посредника) я буду использовать TCP-сокет, который будет слушать определенный порт и принимать соединения от клиентов (курильщиков).
  * Для клиентов (курильщиков) я буду использовать TCP-сокеты, которые будут подключаться к серверу по заданному IP-адресу и порту.
  * Каждый клиент будет иметь свой идентификатор (1, 2 или 3) и свой компонент (табак, бумага или спички), которые будут передаваться серверу при подключении.
  * Сервер будет генерировать два случайных компонента из трех возможных и отправлять их всем клиентам в виде сообщения.
  * Каждый клиент будет проверять, имеет ли он третий компонент, необходимый для скручивания сигареты. Если да, то он будет отправлять серверу сообщение о том, что он забирает компоненты со стола и курит сигарету. Если нет, то он будет ждать следующего раунда.
  * Сервер будет ждать сообщения от одного из клиентов о том, что он курит сигарету. После получения такого сообщения сервер будет начинать новый раунд и повторять процесс.
  * Сервер и клиенты будут отображать только ту информацию, которая поступает им во время обмена. Например, сервер может печатать “Сервер: положил на стол бумагу и спички”, а клиент может печатать “Клиент 1: имею табак, забираю компоненты со стола и курю сигарету”.
### 2. Есть возможность задать IP адрес и порт в командной строке для обеспечения гибкой подстойки к любой сети.
### 3. Для обеспечения корректного взаимодействия сетевых приложений и существующих в них процессов я буду использовать такие программные объекты, как сокеты, структуры sockaddr_in, функции socket(), bind(), listen(), accept(), connect(), send(), recv(), close() и другие.
### 4. Разработанное приложение работает как на одном компьютере так и в распределенном (сетевом) режиме на нескольких компьютерах, по которым можно будет разнести серверы и клиентов. Для этого необходимо указывать правильные IP-адреса и порты при запуске программ.
# Решение на 6-7 баллов:
Для разработки клиентской программы, подключаемой к серверу, которая предназначена для отображения комплексной информации о выполнении приложения в целом, я использовала следующий подход:
  * Создала еще один TCP-сокет, который будет подключаться к серверу по тому же IP-адресу и порту, что и остальные клиенты (курильщики).
  * Отправила серверу специальный идентификатор (например, 0) и компонент (например, наблюдатель), чтобы сервер мог отличить этот сокет от других клиентов.
  * Читала все сообщения, которые сервер отправляет всем клиентам, и анализировала их содержание.
  * Обновляла визуализацию данных в режиме реального времени по мере получения новых сообщений от сервера.
# Решение на 8 баллов:
Для реализации возможности подключения множества клиентов, обеспечивающих отображение информации о работе приложения, я использовала следующий подход:
  * Изменила серверную программу так, чтобы она могла принимать не только три клиента-курильщика, но и неограниченное количество клиентов-наблюдателей. Для этого я использовала функцию select (), которая позволяет мониторить несколько сокетов одновременно и определять, какие из них готовы к чтению или записи. Таким образом, сервер сможет принимать новые соединения от клиентов-наблюдателей в любой момент, не блокируясь на accept () или recv () от других клиентов.
  * Изменила серверную программу так, чтобы она отправляла сообщения не только трем клиентам-курильщикам, но и всем подключенным клиентам-наблюдателям. Для этого я использовала цикл по всем сокетам, которые были добавлены в множество для select (), и отправляла им одно и то же сообщение о компонентах на столе или о курильщике.
  * Не меняла клиентскую программу-наблюдатель, так как она уже умеет подключаться к серверу и визуализировать данные. Запускать ее нужно с разными IP-адресами и портами для разных компьютеров.
